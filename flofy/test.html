<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flofy Test - Chatbot & CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">
        Flofy System Test
      </h1>

      <div class="grid md:grid-cols-2 gap-8">
        <!-- Chatbot Test Card -->
        <div class="bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4 text-gray-700">
            üì± Chatbot Widget
          </h2>
          <p class="text-gray-600 mb-4">
            Prueba el widget del chatbot. Los mensajes se sincronizan
            autom√°ticamente con el CRM.
          </p>
          <div class="space-y-3">
            <div class="text-sm text-gray-500">
              <strong>Funcionalidades:</strong>
            </div>
            <ul class="text-sm text-gray-600 space-y-1">
              <li>‚úÖ Respuestas autom√°ticas con Gemini AI</li>
              <li>‚úÖ L√≠mite de 200 caracteres por respuesta</li>
              <li>‚úÖ Historial y resumen de conversaci√≥n</li>
              <li>‚úÖ Sincronizaci√≥n con CRM</li>
            </ul>
            <a
              href="index.html"
              class="inline-block bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors"
            >
              Abrir Chatbot
            </a>
          </div>
        </div>

        <!-- CRM Test Card -->
        <div class="bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4 text-gray-700">
            üíº CRM Dashboard
          </h2>
          <p class="text-gray-600 mb-4">
            Gestiona las conversaciones del chatbot, toma control manual o deja
            que la IA responda.
          </p>
          <div class="space-y-3">
            <div class="text-sm text-gray-500">
              <strong>Funcionalidades:</strong>
            </div>
            <ul class="text-sm text-gray-600 space-y-1">
              <li>‚úÖ Vista de todas las conversaciones</li>
              <li>‚úÖ Control manual vs autom√°tico</li>
              <li>‚úÖ Respuestas como "asesor" o "flofy"</li>
              <li>‚úÖ Sincronizaci√≥n en tiempo real</li>
            </ul>
            <a
              href="crm.html"
              class="inline-block bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors"
            >
              Abrir CRM
            </a>
          </div>
        </div>
      </div>

      <!-- Instructions -->
      <div class="mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6">
        <h3 class="text-lg font-semibold text-yellow-800 mb-3">
          üß™ Instrucciones de Prueba
        </h3>
        <div class="space-y-4 text-sm text-yellow-700">
          <div>
            <strong>1. Probar Chatbot b√°sico:</strong>
            <ul class="mt-1 ml-4 space-y-1">
              <li>‚Ä¢ Abre el chatbot y env√≠a algunos mensajes</li>
              <li>‚Ä¢ Verifica que la IA responde autom√°ticamente</li>
              <li>‚Ä¢ Las respuestas deben ser de m√°ximo 200 caracteres</li>
            </ul>
          </div>

          <div>
            <strong>2. Probar CRM:</strong>
            <ul class="mt-1 ml-4 space-y-1">
              <li>‚Ä¢ Abre el CRM en otra pesta√±a</li>
              <li>‚Ä¢ Deber√≠as ver las conversaciones del chatbot</li>
              <li>‚Ä¢ Selecciona una conversaci√≥n</li>
            </ul>
          </div>

          <div>
            <strong>3. Probar Control Manual:</strong>
            <ul class="mt-1 ml-4 space-y-1">
              <li>‚Ä¢ En el CRM, haz clic en "Tomar Control"</li>
              <li>‚Ä¢ Env√≠a un mensaje (aparecer√° como "asesor")</li>
              <li>
                ‚Ä¢ Haz clic en "Entregar a IA" para volver al modo autom√°tico
              </li>
            </ul>
          </div>

          <div>
            <strong>4. Verificar Sincronizaci√≥n:</strong>
            <ul class="mt-1 ml-4 space-y-1">
              <li>‚Ä¢ Los mensajes del CRM deben aparecer en el chatbot</li>
              <li>‚Ä¢ Los mensajes del chatbot deben aparecer en el CRM</li>
              <li>‚Ä¢ Refresca las p√°ginas para verificar persistencia</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- System Status -->
      <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
        <h4 class="font-semibold text-blue-800 mb-2">üìä Estado del Sistema</h4>
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <span class="text-blue-600">Configuraci√≥n:</span>
            <div id="config-status" class="text-gray-600">Verificando...</div>
          </div>
          <div>
            <span class="text-blue-600">LocalStorage:</span>
            <div id="storage-status" class="text-gray-600">Verificando...</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Check system status
      document.addEventListener("DOMContentLoaded", function () {
        // Check config
        const configStatus = document.getElementById("config-status");
        const storageStatus = document.getElementById("storage-status");

        try {
          if (typeof CONFIG !== "undefined" && CONFIG.GEMINI_API_KEY) {
            configStatus.innerHTML = "‚úÖ CONFIG cargado correctamente";
            configStatus.className = "text-green-600";
          } else {
            configStatus.innerHTML = "‚ùå CONFIG no encontrado";
            configStatus.className = "text-red-600";
          }
        } catch (e) {
          configStatus.innerHTML = "‚ùå Error cargando CONFIG";
          configStatus.className = "text-red-600";
        }

        // Check localStorage
        try {
          localStorage.setItem("test", "test");
          localStorage.removeItem("test");
          storageStatus.innerHTML = "‚úÖ LocalStorage funcionando";
          storageStatus.className = "text-green-600";

          // Check existing data
          const conversations = localStorage.getItem("flofy_conversations");
          const crmConversations = localStorage.getItem("crm_conversations");

          if (conversations || crmConversations) {
            storageStatus.innerHTML += "<br>üìÅ Datos existentes encontrados";
          }
        } catch (e) {
          storageStatus.innerHTML = "‚ùå LocalStorage no disponible";
          storageStatus.className = "text-red-600";
        }
      });
    </script>

    <script src="config.js"></script>
  </body>
</html>
